(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(6),o=a.n(i),r=(a(13),a(2)),s=a.p+"static/media/Logo_vector.e57222ff.svg",l=a(0),u=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{className:"header__logo",src:s,alt:"site's logo"})})})},d=a(3),p=a.n(d),b=a(4),j=function(e){var t=e.cardData,a=e.onClick,c=e.onCardLike,i=e.userId,o=Object(n.createRef)(),s=t.name,u=t.likes,d=t.link,p=t._id,b=u.some((function(e){return e._id===i})),j=Object(n.useState)(!1),h=Object(r.a)(j,2),m=h[0],f=h[1];Object(n.useEffect)((function(){f(o.current.clientWidth<o.current.scrollWidth)}),[o]);return Object(l.jsxs)("div",{children:[console.log(u),Object(l.jsxs)("div",{className:"card",children:[t.owner._id===i&&Object(l.jsx)("button",{className:"button button_type_delete",type:"click"}),Object(l.jsx)("img",{alt:s,src:d,className:"card__image",onClick:function(){return a(t)}}),Object(l.jsxs)("div",{className:"card__footer",children:[Object(l.jsx)("h2",{ref:o,className:"card__text",children:s}),Object(l.jsxs)("div",{className:"card__likes-container",children:[Object(l.jsx)("button",{className:"button card__like-button ".concat(b&&"card__like-button_active"),id:"likebtn","aria-label":"heart icon (like)",onClick:function(){return c(p,b)}}),Object(l.jsx)("label",{className:"card__like-label",style:{visibility:u.length?"visible":"hidden"},children:u.length})]}),m&&Object(l.jsx)("div",{className:"card__overflow-tooltip",children:s})]})]})]})},h=a(7),m=a(8),f=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject("Failed with status:( ".concat(e.status," ").concat(e.statusText,")"))})).catch((function(e){return console.log(e)}))},_=new(function(){function e(t){var a=t.groupId,n=t.apiKey,c=t.baseUrl;Object(h.a)(this,e),this.groupId=a,this.apiKey=n,this.baseUrl=c}return Object(m.a)(e,[{key:"getInitialCards",value:function(){return f("".concat(this.baseUrl).concat(this.groupId,"/cards"),{headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"}})}},{key:"postNewCard",value:function(e){return f("".concat(this.baseUrl).concat(this.groupId,"/cards/"),{method:"POST",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(e.name),link:"".concat(e.link)})})}},{key:"deleteCardPost",value:function(e){return f("".concat(this.baseUrl).concat(this.groupId,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"".concat(this.apiKey)}})}},{key:"getProfile",value:function(){return f("".concat(this.baseUrl).concat(this.groupId,"/users/me"),{headers:{authorization:"".concat(this.apiKey)}})}},{key:"updateProfile",value:function(e){var t=e.name,a=e.about;return f("".concat(this.baseUrl).concat(this.groupId,"/users/me"),{method:"PATCH",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t),about:"".concat(a),_id:"".concat(this.apiKey),cohort:"".concat(this.groupId)})})}},{key:"updateProfilePhoto",value:function(e){return f("".concat(this.baseUrl).concat(this.groupId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(e)})})}},{key:"likePhoto",value:function(e){return f("".concat(this.baseUrl).concat(this.groupId,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:"".concat(this.apiKey)}})}},{key:"dislikePhoto",value:function(e){return f("".concat(this.baseUrl).concat(this.groupId,"/cards/likes/").concat(e),{method:"Delete",headers:{authorization:"".concat(this.apiKey)}})}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/",apiKey:"69483cc0-2fd4-4d47-b549-ff7c13f67c88",groupId:"group-12"}),O=document.querySelectorAll(".card__like-label span");window.onmousemove=function(e){for(var t=e.clientX+20+"px",a=e.clientY+20+"px",n=0;n<O.length;n++)O[n].style.top=a,O[n].style.left=t};var x=a.p+"static/media/avatar_photo.15862bec.png",v=function(e){var t=e.setUserData,a=e.userInfo,n=e.onEditProfileClick,i=e.onAddPlaceClick,o=e.onEditAvatarClick,s=e.onEnlargeAvatarClick,u=e.onCardClick,d=c.a.useState([]),h=Object(r.a)(d,2),m=h[0],f=h[1],O=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.getInitialCards();case 3:t=e.sent,f(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getProfile();case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}return e.prev=1,e.next=4,_.dislikePhoto(t).then((function(e){return m.map((function(t){return e._id===t._id?e:t}))}));case 4:n=e.sent,f(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,_.likePhoto(t).then((function(e){return m.map((function(t){return e._id===t._id?e:t}))}));case 16:c=e.sent,f(c),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),console.log(e.t1);case 23:case 24:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})));return function(t,a){return e.apply(this,arguments)}}();c.a.useLayoutEffect((function(){O(),v()}),[]);return Object(l.jsx)("div",{children:Object(l.jsxs)("main",{children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__photo-container",children:[Object(l.jsx)("img",{className:"profile__photo",src:a?a.avatar:x,alt:a?"Photo of ".concat(a.name):"Photo of Kristine Weiss"}),Object(l.jsxs)("div",{className:"profile__photo-buttons",children:[Object(l.jsx)("button",{className:"button button_type_edit-profile-image",onClick:o}),Object(l.jsx)("button",{className:"button button_type_enlarge-profile-image",onClick:function(){s(a)}})]})]}),Object(l.jsxs)("div",{className:"profile__description",children:[Object(l.jsx)("h1",{className:"profile__name",children:a?a.name:"Kristine Weiss"}),Object(l.jsx)("button",{className:"button profile__button-edit",type:"button","aria-label":"Edit profile",onClick:n}),Object(l.jsx)("p",{className:"profile__about",children:a?a.about:"Travel guide, food enthusiastic and culture lover"})]}),Object(l.jsx)("button",{className:"button profile__button-add",type:"button","aria-label":"Add or create new profile",onClick:i})]}),Object(l.jsx)("section",{className:"locations",children:m.map((function(e){return t=e,Object(l.jsx)(j,{onClick:u,cardData:t,userId:a._id,onCardLike:g},t._id);var t}))})]})})},g=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__about",children:"\xa9 2020 Around The U.S."})})})},k=function(e){var t=e.children,a=e.formName,n=e.formHeader,c=e.onClose,i=e.id,o=e.isOpen;return Object(l.jsx)("div",{className:"popup ".concat(o?"popup_active":""),onClick:c,children:Object(l.jsxs)("div",{className:"popup__window",id:i,onClick:function(e){e.stopPropagation()},children:[Object(l.jsx)("button",{className:"button button_type_close",type:"button","aria-label":"Close window",onClick:c}),Object(l.jsx)("h2",{className:"popup__title",children:n}),Object(l.jsxs)("form",{className:"form",name:"".concat(a),children:[t,Object(l.jsx)("button",{className:"button button_type_submit button_disabled",type:"submit",children:"Save"})]})]})})},N=function(e){var t=e.navigation,a=e.targetObj,n=e.isOpen,c=e.onClose,i=e.id,o=a.link,r=a.name,s=a.avatar,u=[Object(l.jsx)("div",{className:"navigation-arrow navigation-arrow_left"},"leftNav"),Object(l.jsx)("div",{className:"navigation-arrow navigation-arrow_right"},"rightNav")];return Object(l.jsx)("div",{className:"popup popup_gallery ".concat(n?"popup_active":""),onClick:c,children:Object(l.jsxs)("div",{className:"popup__gallery",id:i,onClick:function(e){e.stopPropagation()},children:[Object(l.jsx)("button",{className:"button button_type_close",type:"button","aria-label":"Close window",onClick:c}),Object(l.jsx)("img",{className:"popup__img",src:o||(s||""),alt:r}),Object(l.jsx)("h2",{className:"popup__place-name",children:r}),t&&u]})})};var y=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),s=o[0],d=o[1],p=Object(n.useState)(!1),b=Object(r.a)(p,2),j=b[0],h=b[1],m=Object(n.useState)(!1),f=Object(r.a)(m,2),_=f[0],O=f[1],x=Object(n.useState)(!1),y=Object(r.a)(x,2),C=y[0],w=y[1],I=Object(n.useState)({}),P=Object(r.a)(I,2),S=P[0],T=P[1],U=Object(n.useState)({}),E=Object(r.a)(U,2),K=E[0],L=E[1],A=function(){w(!1),O(!1),h(!1),d(!1),c(!1)};return Object(l.jsx)("div",{className:"page",children:Object(l.jsxs)("div",{className:"page__wrap",children:[Object(l.jsx)(u,{}),Object(l.jsx)(v,{onEditProfileClick:function(){c(!0)},onAddPlaceClick:function(){d(!0)},onEditAvatarClick:function(){h(!0)},onEnlargeAvatarClick:function(e){L(e),O(!0)},onCardClick:function(e){T(e),w(!0)},userInfo:K,setUserData:function(e){L(e)}}),Object(l.jsx)(g,{}),Object(l.jsxs)(k,{isOpen:a,onClose:A,windowId:"w-edit",formHeader:"Edit Profile",formName:"editWindow",children:[Object(l.jsxs)("label",{htmlFor:"name",className:"form__field",children:[Object(l.jsx)("input",{className:"form__input",type:"text",name:"name",id:"name",placeholder:"Insert name here...",required:!0,minLength:"2",maxLength:"40"}),Object(l.jsx)("span",{className:"form__input-error"})]}),Object(l.jsxs)("label",{htmlFor:"about",className:"form__field",children:[Object(l.jsx)("input",{className:"form__input",type:"text",name:"about",id:"about",placeholder:"Insert job here...",required:!0,minLength:"2",maxLength:"200"}),Object(l.jsx)("span",{className:"form__input-error"})]})]}),Object(l.jsxs)(k,{isOpen:s,onClose:A,windowId:"w-add",formHeader:"New place",formName:"addWindow",children:[Object(l.jsxs)("label",{htmlFor:"place-title",className:"form__field",children:[Object(l.jsx)("input",{className:"form__input",type:"text",name:"name",id:"place-title",placeholder:"Title",required:!0,minLength:"1",maxLength:"30"}),Object(l.jsx)("span",{className:"form__input-error"})]}),Object(l.jsxs)("label",{htmlFor:"image-link",className:"form__field",children:[Object(l.jsx)("input",{className:"form__input",type:"url",name:"link",id:"image-link",placeholder:"Image link",required:!0}),Object(l.jsx)("span",{className:"form__input-error"})]})]}),Object(l.jsx)(k,{isOpen:j,onClose:A,windowId:"w-editpic",formHeader:"Change profile picture",formName:"editprofpic",children:Object(l.jsxs)("label",{htmlFor:"pictureurl",className:"form__field",children:[Object(l.jsx)("input",{className:"form__input",type:"url",name:"avatar",id:"pictureurl",placeholder:"insert url for picture",required:!0}),Object(l.jsx)("span",{className:"form__input-error"})]})}),Object(l.jsx)(N,{isOpen:C,onClose:A,id:"w-img",targetObj:S,navigation:!0}),Object(l.jsx)(N,{isOpen:_,onClose:A,id:"w-piclrg",targetObj:K,navigation:!1})]})})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),C()}},[[16,1,2]]]);
//# sourceMappingURL=main.1ca58749.chunk.js.map